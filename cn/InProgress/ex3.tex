\chapter{Exercise 3: 格式化输出}

请保留\file{Makefile}文件，因为它可以帮你找到错误，并且在将来我们要自动化构建时需要往里面添加东西.

许多编程语言使用C方式的格式化输出, 让我们来试一下吧:

\begin{code}{ex3.c}
<< d['code/ex3.c|pyg|l'] >>
\end{code}

完成之后运行\shell{make ex3}去生成并运行它. 
确保你\emph{解决了所有警告信息}(warnings).

这些练习只需要很少的代码， 下面就来解决它们吧:

\begin{enumerate}
\item 首先包含另一个叫做\file{stdio.h}的头文件. 这样做就是告诉编译器你要使用"标准输入输出函数"。 其中一个就是\ident{printf}.
\item 接着你将用到一个叫做\ident{age}的变量并且给它赋值为10.
\item 下一步你要把变量\ident{height}赋值为72.
\item 然后你用\ident{printf}函数将打印出这个星球上最高的10孩子的年龄和身高.
\item 在\ident{printf}函数中你会注意到你传进了一个字符串，这个字符串和别的语言中的格式化字符串很像.
\item 在这个格式化字符串之后, 你放置了“代替”\ident{printf}中格式化字符串的变量.
\end{enumerate}

这么做的结果就是你把几个变量交给\ident{printf}，然后它构造出一个新的字符串并且在终端中打印这个新的字符串.

\section{你会看到什么}

当你构建代码时，你会看到这些:

\begin{Terminal}{Building and running ex3.c}
\begin{lstlisting}
<< d['code/ex3.out|dexy'] >>
\end{lstlisting}
\end{Terminal}

很快我就不会再告诉你运行\file{make}查看build生成的信息,所以请确保你现在能正常工作.

\section{课外练习}

在每个练习的附加分部分\emph{附加分}，我都会让你自己找到一些问题并自己思考解决. 这是成为一名真正的程序员所必经之路.  如果你老是什么都没想过就跑去别人那问问题，你就永远也学不会如何独立的解决问题. 这就导致你永远不会在你的专业技能上树立信心， 总是希望有人在你身旁才能正常工作.

打破这种恶习的方法就是\emph{强制}你自己先回答自己的问题, 然后确认你是对的. 你可以试着发现问题, 用你的方法试着解决问题,自己做试验.

这个练习中我希望你能自己上网，找出\emph{所有}\ident{printf}的转义符和修饰符. 转义符有
\verb|\n|和 \verb|\t|，可以让你（各自的）打印出一个空行和制表符. 修饰符有\verb|%s|和 \verb|%d|， 可以让你打印出一个字符串和一个整形数.  找出所有可能的符号, 你可以怎样的修改它们, 你可以控制它们实现什么样的“精度”和宽度.

从现在起, 这样的任务就会出现在你的附加分中，你应该做做这些练习.

\section{如何修改它}

用一些以下这样可能会也可能不会让你的电脑崩溃掉的方法去解决问题:

\begin{enumerate}
\item 在第一次\ident{printf}的调用中，删掉\ident{age}变量然后重新编译. 以应该会收到大量的警告信息.
\item 运行这个程序的话，你的程序可能会崩溃,或者输出一个相当不合理的年龄.
\item 恢复\ident{printf}的原样, 但取消给\ident{age}变量
    赋的整型值，然后重新构建并运行.
\end{enumerate}


\begin{Terminal}{Breaking ex3.c}
\begin{lstlisting}
<< d['code/ex3.bad.out|dexy'] >>
\end{lstlisting}
\end{Terminal}

\section{附加分}

\begin{enumerate}
\item 进你所能的用别的方法去修改\file{ex3.c}.
\item 运行\verb|man 3 printf|然后阅读其他像'\%'这样你可以使用的的修饰符. 如果你在别的语言中使用过它们，这回看起来很熟悉 (它们就是从\ident{printf}来的).
\item 把\file{ex3}加入到你的\file{Makefile}\ident{总}表. 使用这个\verb|清理|并重建你的练习.
\item 把\file{ex3} 加入到\file{Makefile}的\ident{清理}列中.
    现在使用\verb|make clean|会把你想清理的都清理掉.
\end{enumerate}


