\chapter*{引言: 笛卡尔的 C 语言之梦}

\begin{quotation}

一切迄今我以为最接近于“真实”的东西都来自感觉和对感觉的传达。但是，我发现，
这些东西常常欺骗我们。因此，唯一明智的是：再也不完全信赖那些哪怕仅仅欺骗过
我们一次的东西。

    \attrib{笛卡尔《第一哲学沉思集》}
\end{quotation}

如果一定要找一段名人名言来描述 C 语言编程的话，那就是这一段了。对于很多程序员
来说，这让 C 语言显得恐怖和邪恶。C 语言就是恶魔、撒旦、捣乱的洛基\footnote
{译注：洛基是北欧神话里的火神，以惹是生非闻名。撒旦和路西法都是恶魔的名称}，
他用指针迷惑你，给你直接访问硬件的权力，从而毁掉你的工作效率。然后，
一旦这位路西法大人吸引你上了钩，他就会用邪恶的“segfault（段错误）”毁掉你的世界，
并在邪恶的笑声中让你知道你最终栽在了跟魔鬼的交易里。

但是，造成这一切并不是 C 语言的过错。不，我的朋友，真正捣蛋的恶魔其实是你的
计算机和操作系统。它们对你隐瞒了真实的内部工作原理，所以你从不曾真正了解到
究竟发生了什么。而 C 语言唯一失败的地方，就是带你去了那些你看不到的地方，告诉你
冷酷无情的真相。C 语言给了你一颗红药丸\footnote{译注：《黑客帝国》典故，选择
红药丸让主角层层深入探求真相，蓝药丸让主角继续醉生梦死。}，C 语言展示给你幕后
的巫师。\emph{C 语言就是真相。}

既然 C 语言如此危险，我们依然要用 C 呢？因为 C 能让你战胜抽象带来的虚假现实，
并从愚蠢中将你解放出来。

\section*{你将学到的东西}

本书的目的是让你掌握足够的 C 语言，从而可以写自己的软件，或者修改别人的代码。
本书的结尾部分我们将从一本更著名的叫做 \krc 的书中节选一些代码出来，并让你
用自己学到的东西进行代码审查(code review)。要达到这一程度，你需要学习一些东西：

\begin{enumerate}
\item C 语言的基本语法和术语。
\item 编译、make文件、连接器。
\item 找出Bug并防止Bug产生。
\item 防御性编程。
\item 将 C 代码改坏。
\item 编写基础的 Unix 系统程序。
\end{enumerate}

完成本书的最后一章后，你应该已经拥有了足够的弹药来应对基本的系统软件、库文件、
以及小规模项目的撰写了。


\section*{如何阅读本书}

本书是写给有至少学过一门编程语言的程序员的，如果你还没学过编程，我推荐你去看
\href{http://learnpythonthehardway.org}{Learn Python The Hard Way} 或者
\href{http://ruby.learncodethehardway.org}{Learn Ruby The Hard Way}。这两本书
是为初学者写的，而且效果不错。学完其中一本后，你就可以回来对这本书开始下手了。

对于已经学过编程的人来说，本书乍看上去似乎有些怪。别的书一般都是让你一段
接着一段地读下去，然后断断续续地写一点代码，这本书完全不同。取而代之的是
我要求你立即输入代码，然后我将告诉你刚才做了什么。解释你体验过的事情更容易
一些，因此这种方式相对更好一些。

正因为本书结构这样特殊，你在看书时\emph{必须}遵守一些规矩：

\begin{enumerate}
\item 键入所有的代码，禁止复制粘贴！
\item 一字不差地键入代码，即使是注释也一样。
\item 让程序运行起来，保证输出都和本书的相同。
\item 如果有 bug 就将其改正。
\item 做加分习题，有不会的也没关系，跳过就好了。
\item 在求助之前一定要确认你已经尽力了。
\end{enumerate}

如果你遵从这些规则，完成了书里的所有作业，还是不会用 C 语言编程，那也没关系，
因为你至少尝试过了。C 语言并不适合每个人，但尝试的过程也会让你变成一个更好
的程序员。

\section*{关键技能}

我猜你是从一门菜鸟语言来到这里的。\footnote{我只是在挑逗你而已，如果你能
看得出来的话}要么你来自像 Python 或者 Ruby 这样“还算能用”的语言，这些语言让
思维不清半吊子瞎鼓捣的你也能写出能运行的程序来。要么你用过 Lisp 这样的语言，
这些语言假装计算机是某个纯函数的仙境，四周还装了五彩的婴儿墙。也许你学过
Prolog，因而认为整个世界应该只是一个供你上下求索的数据库。更糟糕的还在后面呢，
我打赌你还用过某个 IDE，所以你的脑子充满里记忆空洞，如果你不是每打三个字母
就按一次 CTRL-SPACE 的话，我怕你连一个完整的函数名称都敲不出来。

不管背景如何，你都可能有四样技能有待提高：

\begin{description}

\item[读写能力] 如果你平时使用 IDE 的话，这一点就尤为正确。不过大体来说我发现
    程序员略读的时候太多了，从而导致理解性阅读能力有些问题。他们将代码扫视
    一遍就觉得自己读懂了，其实不然。其他的语言还提供了各种工具，从而
    避免让程序员直接撰写代码，所以一旦面对 C 语言这样的东西时，他们就立马
    崩溃了。最简单的办法就是要理解\emph{每个人}都有这样的问题，解决方案就是
    强迫自己慢下来，倍加细致地去读写代码。一开始你也许会觉着很痛苦很烦躁，那
    就增加自己休息的频率，最后你会觉得这其实也很容易做到。

\item[关注细节] 这方面没有人能做得好，这也是劣质软件的最大成因。其他的语言
    会让不够专注的你蒙混过关，但 C 语言却要求你完全聚精会神，因为 C 语言直接
    和计算机打交道，而计算机硬件又是极其挑剔的。在 C 的语境中没有 “有点像”或是
    “差不多”这样的说法，所以你需要专注。反复检查你的工作。在证明正确之前，要
    先假设一切都可能是错的。
    
\item[发现差异] 从别的语言来的程序员有一个问题，就是他们的大脑已经被训练成
    可以发现\emph{那种}语言中的差异，而不是 C 语言中的差异。当你在对比你的代码
    和标准答案时，你的视线会直接跳过那写你认为不重要或不熟悉的部分。我给你的
    解决办法是：强迫自己观察自己的错误，如果你的代码跟标准答案不是\emph{一字不差}，
    那它就是错的。
\item[规划和除错]  我喜欢其他更简单的语言，因为我可以胡搞乱来。我把想法打出来，
    然后就能直接在编译器里看到结果。这些语言可以让你很方便地尝试新的主意，但
    你有没有发现呢：如果你一直用“乱改直到能用”的方法写代码，到头来就是什么都不能
    用了。C 语言对你要求比较高，因为它要求你先计划好要创建的东西。当然你也可以
    偶尔瞎搞搞，但和其他语言相比，你需要在更早的阶段就开始认真做计划。在你写
    代码之前，我会教你如何规划程序的关键部分，希望这能同时使你成为一个更
    优秀的程序员。即使是微小的计划也能让你的后续工作更为顺利。
\end{description}

在学习 C 语言的过程中，你将被迫更早地、更多地应对这些问题，所以学习 C 语言
更能让你成为一个好程序员。你不能思维不清半吊子地瞎鼓捣，否则什么都不会做出来。
C 语言的优势是作为一门简单的语言，你可以自己把它弄明白，所以如果你要学习机器
的工作原理，并增强这些关键的编程技能的话，C 语言是上佳的选择。

C 语言比一些其他的语言难学一些，但这只是因为 C 语言做到了不对你隐藏机器的
工作原理，其他语言试图对工作原理进行模糊处理，这也是其他处理失败的地方。

\section*{协议}

本书可以免费阅读，但在我完成修改之前，你不能进行分发或做任何修改。我得保证别把
一本没完成的书传出去，以免不小心误人子弟。

